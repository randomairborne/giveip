<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A simple website to return your IP address. No logs are kept.">
    <meta property="og:title" content="GiveIP" />
    <meta property="og:url" content="https://giveip.io/" />
    <meta property="og:description" content="A No-BS, no-logs IP address returner." />
    <link rel="preload" href="https://v6.giveip.io/raw" as="fetch" />
    <link rel="preload" href="https://v4.giveip.io/raw" as="fetch" />
    <noscript>
        <meta http-equiv="refresh" content="0; url='/raw'" />
    </noscript>
    <title id="title">What's my IP?</title>
    <link rel="icon" href="data:,">
    <style>
        h1 {
            font-size: 3vw;
            height: 100%;
            width: 100%;
            display: flex;
            position: fixed;
            align-items: center;
            justify-content: center;
            font-family: Arial, Verdana, Helvetica, sans-serif;
        }

        .stack {
            display: inline;
        }
    </style>
</head>

<body onload="onLoad()">
    <h1>
        <div class="stack">
            <div id="ip4txt" hidden>Your public IPv4 is:&nbsp;<code id="ip4">(none)</code></div>
            <div id="ip6txt" hidden>Your public IPv6 is:&nbsp;<code id="ip6">(none)</code></div>
        </div>
    </h1>
    <script>
        async function onLoad() {
            const ip4 = document.getElementById("ip4");
            const ip6 = document.getElementById("ip6");
            const ip4txt = document.getElementById("ip4txt");
            const ip6txt = document.getElementById("ip6txt");
            let didSucceed = false;
            let v6r = await fetch("https://v6.giveip.io/raw").then(req => req.text()).catch(failed => { console.log("Request failed:" + failed) });
            let v4r = await fetch("https://v4.giveip.io/raw").then(req => req.text()).catch(failed => { console.log("Request failed:" + failed) });
            let [v4, v6] = await Promise.all([v4r, v6r]);
            if (v4 !== undefined) {
                ip4.innerText = v4;
                ip4txt.hidden = false;
                didSucceed = true;
                document.getElementById("title").innerText = `Your IP is ${v4}`;
            }
            if (v6 !== undefined) {
                ip6.innerText = v6;
                ip6txt.hidden = false;
                didSucceed = true;
            }
            if (!didSucceed) {
                window.location.href = "/raw";
            }
        }
    </script>

</html>
